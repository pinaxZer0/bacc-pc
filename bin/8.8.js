webpackJsonp([8],{159:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=(n(160),n(18),n(80)),a=(n(23),n(22)),s=a.fstr,c=a.fstr2num,u=(n(28),n(10),n(91)),d=n(164),f=(d.BeadPlate,d.BigRoad,d.BigEye,laya.net.Loader),g=laya.utils.Handler,h=function(){function e(t){i(this,e),this.opt=t}return o(e,[{key:"assignAllBtns",value:function(){for(var e=this,t=this._view._children,n=/[A-Za-z]\d+/,i=0;i<t.length;i++){var o=t[i].asButton;if(o instanceof fairygui.GButton){var l=function(){if(n.test(o.name))return"continue";var t=o.name.split("."),i=t[1]||1;t=t[0];var l=e._view.getController(t);l?(o.onClick(e,function(){l.selectedIndex=i}),l.setSelectedIndex(0)):o.onClick(e,function(){var e=r(t)+"Win";if(u[e])var n=new u[e];else var n=new u.Win(t);n.modal=!0,n.show()})}();if("continue"===l)continue}}}},{key:"active",value:function(){0==this._view.getController("isAdmin").selectedIndex&&this.enterGame()}},{key:"enterGame",value:function(){fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"alltables"}),netmsg.once("alltables",this,function(e){fairygui.GRoot.inst.closeModalWait(),console.log(e),this.tables=[];for(var t in e.tables)e.tables[t].roomid=t,this.tables.push(e.tables[t]);var n=this.tables.length;n>1&&console.log("桌子数量不唯一，请检查服务器以及数据库"),_socket.sendp({c:"join",code:this.tables[0].roomid})})}}],[{key:"create",value:function(t,i){"function"==typeof t&&(i=t,t={}),Laya.loader.load([{url:n(150),type:f.IMAGE},{url:n(151),type:f.IMAGE},{url:n(165),type:f.IMAGE},{url:n(153),type:f.BUFFER}],g.create(null,function(){window.magiclink&&magiclink.reg(function(e){console.log("magiclink ret",e),_socket.sendp({c:"join",code:e})});var n=new e(t);fairygui.UIPackage.addPackage("baijiale"),fairygui.UIConfig.buttonSound=null,fairygui.UIConfig.buttonSoundVolumeScale=0;var r=n._view=fairygui.UIPackage.createObject("Package1","hall").asCom;r.getController("isAdmin").selectedIndex=l.isAdmin?1:0;var o=r.getChild("n33");o.removeChildren(),r.getChild("n34").onClick(null,function(){var e=r.getChild("n12").text,t=r.getChild("n7").text;return e||t?(_socket.sendp({c:"userInfo",id:e,nickname:t}),fairygui.GRoot.inst.showModalWait(),void netmsg.once("userInfo",null,function(e){fairygui.GRoot.inst.closeModalWait(),o.removeChildren();var t=fairygui.UIPackage.createObject("Package1","Component6");o.addChild(t),t.getChild("userInfo").getChild("n45").url=e.face,t.getChild("n4").text=e.nickname,t.getChild("n7").text=e.showId,t.getChild("n9").text=s(e.coins),t.getChild("n19").text=s(e.savedMoney||0),t.getChild("n21").text=e.regIP||"",t.getChild("n23").text=e.lastIP||"";var n=t.getChild("n3");n.on("input",null,function(){var e=n.text.replace(/ /g,"");n.text=s(e)});var i=t.getChild("n16");i.on("input",null,function(){var e=i.text.replace(/ /g,"");i.text=s(e)});var r=t.getChild("n10"),l=t.getChild("n11");e.block&&new Date(e.block)>new Date&&(r.selected=!0),e.nochat&&new Date(e.nochat)>new Date&&(l.selected=!0),t.getChild("n2").onClick(null,function(){var n=t.getChild("n3").text.replace(/ /g,"");if(n=Number(n),!isNaN(n)&&n){var i=c(t.getChild("n9").text);if(n<0){if(!confirm("确定要减钱？？！"))return;i+n<0&&(tipon("减分过多，自动调整成"+-i).popup(),n=-i)}if(0==n)return void(t.getChild("n3").text="");_socket.sendp({c:"admin.addcoins",userid:e.id,coins:n}),netmsg.once("admin.addcoins",null,function(e){e.err||(t.getChild("n3").text="",t.getChild("n9").text=s(e.newcoin))})}}),t.getChild("n15").onClick(null,function(){var n=i.text.replace(/ /g,"");if(n=Number(n),!isNaN(n)&&n){var r=c(t.getChild("n19").text);if(n<0){if(!confirm("确定要减钱？？！"))return;r+n<0&&(tipon("减分过多，自动调整成"+-r).popup(),n=-r)}if(0==n)return void(i.text="");_socket.sendp({c:"admin.addsaved",userid:e.id,coins:n}),netmsg.once("admin.addsaved",null,function(e){e.err||(i.text="",t.getChild("n19").text=s(e.newcoin))})}}),r.onClick(null,function(){_socket.sendp({c:"admin.block",userid:e.id,t:r.selected?315532748958:0})}),l.onClick(null,function(){_socket.sendp({c:"admin.nochat",userid:e.id,t:l.selected?315532748958:0})}),t.getChild("n13").onClick(null,function(){_socket.sendp({c:"admin.resetpwd",userid:e.id}),netmsg.once("admin.resetpwd",null,function(e){e.err||prompt("密码已修改，请复制之后发给玩家",e.newpwd)})}),t.getChild("n14").onClick(null,function(){_socket.sendp({c:"admin.resetsecpwd",userid:e.id}),netmsg.once("admin.resetsecpwd",null,function(e){e.err||tipon("密保已重置").popup()})})})):(r.getChild("n12").displayObject.prompt="id或者昵称必须填写一个",r.getChild("n12").text="",void(r.getChild("n7").text=""))});var u=r.getChild("n49");u.setVirtual(),r.getChild("n47").onClick(null,function(){var e=r.getChild("n44").text,t=r.getChild("n40").text;if(e){if(e=new Date(e),"Invalid Date"==e)return r.getChild("n44").text="",void(r.getChild("n44").displayObject.prompt="类似2017-6-7 00:00:00")}else{var n=new Date;e=new Date(""+n.getFullYear()+"-"+(n.getMonth()+1)+"-1")}if(t){if(t=new Date(t),"Invalid Date"==t)return r.getChild("n44").text="",void(r.getChild("n44").displayObject.prompt="类似2017-6-7 12:00:00")}else t=new Date;fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"admin.addCoinsLog",start:e,end:t}),netmsg.once("admin.addCoinsLog",null,function(e){fairygui.GRoot.inst.closeModalWait(),u.itemRenderer=g.create(null,function(t,n){var i=e.logs[t];n.getChild("n1").text=a.toDateString(i.time),n.getChild("n3").text=i.targetName,n.getChild("n2").text=s(i.coins),n.getChild("n4").text=i.operatorName,n.getChild("n5").text=i.type||""},null,!1),u.numItems=e.logs.length;for(var t=0,n=0;n<e.logs.length;n++)t+=e.logs[n].coins;r.getChild("n51").text="总计 "+s(t),r.getChild("n56").onClick(null,function(){window.open(getAbsUrl("pf/bacc.hori/downxlsx")+"?token="+e.token+"&userid="+l.id)})})}),function(){var e=r.getChild("n75");e.setVirtual();var t,i,o;e.itemRenderer=g.create(null,function(e,n){var i=t.d[e];n._clickHandler&&n.offClick(null,n._clickHandler),n._clickHandler=function(){r.getController("c1").selectedIndex=0,r.getChild("n12").text=i.showId,r.getChild("n7").text=i.nickname,r.getChild("n34").displayObject.event("click")},n.onClick(null,n._clickHandler),i?(n.getChild("n1").text=a.toDateString(i._t),n.getChild("n3").text=i.nickname+" ID:"+i.showId,n.getChild("n4").text=s(i.coins),n.getChild("n2").text=i.act,n.getChild("n5").text=i.ip||""):(n.getChild("n1").text="--",n.getChild("n3").text="--",n.getChild("n4").text="",n.getChild("n2").text="",n.getChild("n5").text="")},null,!1),r.getChild("n93").onClick(null,function(){var e=Number(r.getChild("n98").text)-1;i&&i(e)}),r.getChild("n94").onClick(null,function(){var e=Number(r.getChild("n98").text)+1;i&&i(e)}),r.getChild("n73").onClick(null,function(){netmsg.off("admin.translog",null,o),r.getChild("n98").off("enter",null,i),r.getChild("n98").off("blur",null,i);var l=r.getChild("n70").text,a=r.getChild("n66").text;if(l){if(l=new Date(l),"Invalid Date"==l)return r.getChild("n70").text="",void(r.getChild("n70").displayObject.prompt="类似2017-6-7 00:00:00")}else{var s=new Date;l=new Date(""+s.getFullYear()+"-"+s.getMonth()+"-"+s.getDate())}if(a){if(a=new Date(a),"Invalid Date"==a)return r.getChild("n66").text="",void(r.getChild("n66").displayObject.prompt="类似2017-6-7 12:00:00")}else a=new Date;var c=r.getChild("n89").text,u=r.getChild("n85").text;fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"admin.translog",start:l,end:a,showId:c,nickname:u}),o=function(n){fairygui.GRoot.inst.closeModalWait(),t=n,r.getChild("n99").text="/"+Math.ceil(n.len/n.ps),r.getChild("n98").text=Math.floor(n.from/n.ps)+1,e.numItems=n.d.length},n._nmh={"admin.translog":o},netmsg.on("admin.translog",null,o),i=function(e){var e=e||Number(r.getChild("n98").text);e&&t&&(e>Math.ceil(t.len/t.ps)&&(e=Math.ceil(t.len/t.ps),r.getChild("n98").text=e.toString()),_socket.sendp({c:"admin.translog",start:l,end:a,showId:c,nickname:u,setfrom:(e-1)*t.ps}))},r.getChild("n98").on("enter",null,i),r.getChild("n98").on("blur",null,i)})}(),function(){function e(e,t){fairygui.GRoot.inst.showModalWait(),netmsg.off("board",null,n),_socket.sendp({c:"board",type:e}),netmsg.once("board",null,t),n=t}function t(e,t,n){fairygui.GRoot.inst.closeModalWait(),e.itemRenderer=g.create(null,function(e,t){t._clickHandler&&t.offClick(null,t._clickHandler),t._clickHandler=function(){r.getController("c1").selectedIndex=0,r.getChild("n12").text=i.showId,r.getChild("n7").text=i.nickname,r.getChild("n34").displayObject.event("click")},t.onClick(null,t._clickHandler);var i=n.board[e];t.getChild("n3").text=i.nickname+" ID:"+i.showId,t.getChild("n2").text=i[n.type],t.getChild("n4").text=i.regIP||"",t.getChild("n6").text=i.lastIP||"",t.getChild("n1").text=a.toDateString(i.loginTime)},null,!1),e.numItems=n.board.length}var n,i=r.getController("c1");r.getChild("n113").setVirtual(),r.getChild("n135").setVirtual(),i.on("fui_state_changed",null,function(){switch(i.selectedIndex){case 4:e("coins",t.bind(null,r.getChild("n113"),"coins"));break;case 5:e("savedMoney",t.bind(null,r.getChild("n135"),"savedMoney"))}})}(),function(){var e=r.getChild("n144");e.removeChildren();var t=fairygui.UIPackage.createObject("Package1","服务器管理item");t.getChild("n3").text="",t.getChild("n2").text="";var n=t.getChild("n7"),i=t.getChild("n8");n.selected=!1,i.selected=!1,n.onClick(null,function(){_socket.sendp({c:"admin.srv.chat",v:!n.selected})}),i.onClick(null,function(){_socket.sendp({c:"admin.srv.enter",v:!i.selected})}),e.addChild(t),fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"admin.srv.ls"}),netmsg.on("admin.srv.ls",null,function(e){fairygui.GRoot.inst.closeModalWait(),t.getChild("n3").text="服务器1区",t.getChild("n2").text="金豆"+e.total_profit,n.selected=!e.canchat,i.selected=!e.canenter});var o=r.getChild("n151");o.removeChildren(),fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"admin.srv.coinstat"}),netmsg.once("admin.srv.coinstat",null,function(e){fairygui.GRoot.inst.closeModalWait();for(var t=0;t<e.items.length;t++){var n=fairygui.UIPackage.createObject("Package1","金豆item"),i=e.items[t];if(t<e.items.length-1){var r=e.items[t+1],l=r.totalcoins+r.adminAdd-r.profit;l<i.totalcoins?n.getChild("n2").color="red":l>i.totalcoins&&(n.getChild("n2").color="green")}n.getChild("n3").text=a.toDateString(i.time),n.getChild("n2").text=s(i.totalcoins),n.getChild("n9").text=s(-i.profit),n.getChild("n10").text=s(i.adminAdd),o.addChild(n)}})}(),r.getChild("n3").onClick(n,n.enterGame),r.getChild("n62").onClick(null,function(){main({showlogin:!0})}),i(null,n)}))}}]),e}();e.exports=h.create},160:function(e,t,n){(function(t){"use strict";/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
function i(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0}function r(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function l(e){return!r(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function a(e){if(x.isFunction(e)){if(k)return e.name;var t=e.toString(),n=t.match(_);return n&&n[1]}}function s(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(k||!x.isFunction(e))return x.inspect(e);var t=a(e),n=t?": "+t:"";return"[Function"+n+"]"}function u(e){return s(c(e.actual),128)+" "+e.operator+" "+s(c(e.expected),128)}function d(e,t,n,i,r){throw new I.AssertionError({message:n,actual:e,expected:t,operator:i,stackStartFunction:r})}function f(e,t){e||d(e,!0,t,"==",I.ok)}function g(e,t,n,a){if(e===t)return!0;if(r(e)&&r(t))return 0===i(e,t);if(x.isDate(e)&&x.isDate(t))return e.getTime()===t.getTime();if(x.isRegExp(e)&&x.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(l(e)&&l(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(r(e)!==r(t))return!1;a=a||{actual:[],expected:[]};var s=a.actual.indexOf(e);return s!==-1&&s===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),p(e,t,n,a))}return n?e===t:e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function p(e,t,n,i){if(null===e||void 0===e||null===t||void 0===t)return!1;if(x.isPrimitive(e)||x.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=h(e),o=h(t);if(r&&!o||!r&&o)return!1;if(r)return e=b.call(e),t=b.call(t),g(e,t,n);var l,a,s=O(e),c=O(t);if(s.length!==c.length)return!1;for(s.sort(),c.sort(),a=s.length-1;a>=0;a--)if(s[a]!==c[a])return!1;for(a=s.length-1;a>=0;a--)if(l=s[a],!g(e[l],t[l],n,i))return!1;return!0}function m(e,t,n){g(e,t,!0)&&d(e,t,n,"notDeepStrictEqual",m)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&t.call({},e)===!0}function C(e){var t;try{e()}catch(e){t=e}return t}function y(e,t,n,i){var r;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=C(t),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!r&&d(r,n,"Missing expected exception"+i);var o="string"==typeof i,l=!e&&x.isError(r),a=!e&&r&&!n;if((l&&o&&v(r,n)||a)&&d(r,n,"Got unwanted exception"+i),e&&r&&n&&!v(r,n)||!e&&r)throw r}var x=n(161),w=Object.prototype.hasOwnProperty,b=Array.prototype.slice,k=function(){return"foo"===function(){}.name}(),I=e.exports=f,_=/\s*function\s+([^\(\s]*)\s*/;I.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=u(this),this.generatedMessage=!0);var t=e.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var i=n.stack,r=a(t),o=i.indexOf("\n"+r);if(o>=0){var l=i.indexOf("\n",o+1);i=i.substring(l+1)}this.stack=i}}},x.inherits(I.AssertionError,Error),I.fail=d,I.ok=f,I.equal=function(e,t,n){e!=t&&d(e,t,n,"==",I.equal)},I.notEqual=function(e,t,n){e==t&&d(e,t,n,"!=",I.notEqual)},I.deepEqual=function(e,t,n){g(e,t,!1)||d(e,t,n,"deepEqual",I.deepEqual)},I.deepStrictEqual=function(e,t,n){g(e,t,!0)||d(e,t,n,"deepStrictEqual",I.deepStrictEqual)},I.notDeepEqual=function(e,t,n){g(e,t,!1)&&d(e,t,n,"notDeepEqual",I.notDeepEqual)},I.notDeepStrictEqual=m,I.strictEqual=function(e,t,n){e!==t&&d(e,t,n,"===",I.strictEqual)},I.notStrictEqual=function(e,t,n){e===t&&d(e,t,n,"!==",I.notStrictEqual)},I.throws=function(e,t,n){y(!0,e,t,n)},I.doesNotThrow=function(e,t,n){y(!1,e,t,n)},I.ifError=function(e){if(e)throw e};var O=Object.keys||function(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}}).call(t,function(){return this}())},161:function(e,t,n){(function(e,i){function r(e,n){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(n)?i.showHidden=n:n&&t._extend(i,n),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),s(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function l(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,i){if(e.customInspect&&n&&O(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return y(r)||(r=s(e,r,i)),r}var o=c(e,n);if(o)return o;var l=Object.keys(n),p=a(l);if(e.showHidden&&(l=Object.getOwnPropertyNames(n)),_(n)&&(l.indexOf("message")>=0||l.indexOf("description")>=0))return u(n);if(0===l.length){if(O(n)){var m=n.name?": "+n.name:"";return e.stylize("[Function"+m+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(I(n))return e.stylize(Date.prototype.toString.call(n),"date");if(_(n))return u(n)}var v="",C=!1,x=["{","}"];if(h(n)&&(C=!0,x=["[","]"]),O(n)){var w=n.name?": "+n.name:"";v=" [Function"+w+"]"}if(b(n)&&(v=" "+RegExp.prototype.toString.call(n)),I(n)&&(v=" "+Date.prototype.toUTCString.call(n)),_(n)&&(v=" "+u(n)),0===l.length&&(!C||0==n.length))return x[0]+v+x[1];if(i<0)return b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var k;return k=C?d(e,n,i,p,l):l.map(function(t){return f(e,n,i,p,t,C)}),e.seen.pop(),g(k,v,x)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return C(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,i,r){for(var o=[],l=0,a=t.length;l<a;++l)M(t,String(l))?o.push(f(e,t,n,i,String(l),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(e,t,n,i,r,!0))}),o}function f(e,t,n,i,r,o){var l,a,c;if(c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),M(i,r)||(l="["+r+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(n)?s(e,c.value,null):s(e,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),w(l)){if(o&&r.match(/^\d+$/))return a;l=JSON.stringify(""+r),l.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=e.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=e.stylize(l,"string"))}return l+": "+a}function g(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function C(e){return"number"==typeof e}function y(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function w(e){return void 0===e}function b(e){return k(e)&&"[object RegExp]"===j(e)}function k(e){return"object"==typeof e&&null!==e}function I(e){return k(e)&&"[object Date]"===j(e)}function _(e){return k(e)&&("[object Error]"===j(e)||e instanceof Error)}function O(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function j(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var S=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,l=String(e).replace(S,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}}),a=i[n];n<o;a=i[++n])l+=m(a)||!k(a)?" "+a:" "+r(a);return l},t.deprecate=function(n,r){function o(){if(!l){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),l=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var l=!1;return o};var R,A={};t.debuglog=function(e){if(w(R)&&(R=i.env.NODE_DEBUG||""),e=e.toUpperCase(),!A[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=i.pid;A[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else A[e]=function(){};return A[e]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=m,t.isNullOrUndefined=v,t.isNumber=C,t.isString=y,t.isSymbol=x,t.isUndefined=w,t.isRegExp=b,t.isObject=k,t.isDate=I,t.isError=_,t.isFunction=O,t.isPrimitive=E,t.isBuffer=n(162);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",D(),t.format.apply(t,arguments))},t.inherits=n(163),t._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(t,function(){return this}(),n(9))},162:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},163:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},164:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(92),a=function(){function e(t){i(this,e),this.view=t,this.roadBeadPlate=t.getChildAt(0).asCom,this.cols=this._orgCols=Math.max(9,Math.ceil(this.view.width/27)),this.roadBeadPlate.getChild("n90").asList.removeChildren()}return o(e,[{key:"refreshRoad",value:function(e){var t=this.roadBeadPlate.getChild("n90").asList;t.removeChildren();var n=Math.floor(e.length/6)+1,i=Math.max(n,this._orgCols);this.cols=i,n>=this._orgCols?this.view.scrollPane.setPosX(this.roadBeadPlate.width-this.view.width):this.view.scrollPane.setPosX(0);for(var r=t._children.length;r<e.length;r++){var o=fairygui.UIPackage.createObject("Package1","路格1"),l=e[r],a=o.getController("c1");if(a.selectedIndex=0,!l)return;"banker"==l.win?a.selectedIndex=1:"player"==l.win?a.selectedIndex=2:a.selectedIndex=3,l.demo?o.getTransition("t0").play():o.getTransition("t0").stop(),o.getChild("n6").visible=l.bankerPair,o.getChild("n7").visible=l.playerPair,t.addChild(o)}}},{key:"cols",get:function(){return this._cols},set:function(e){this._cols=e,this.roadBeadPlate.width=28*this._cols+1}}]),e}(),s=function(){function e(t){i(this,e),this.view=t,this.roadBig=t.getChildAt(0).asCom,this.cols=this._orgCols=Math.max(24,Math.ceil(this.view.width/13))}return o(e,[{key:"bigRoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.columns,t.rows),i=void 0===n?6:n,r=[],o={},a=0,s=void 0,c=[],u=0;return e.forEach(function(e){if(e){if("tie"===e.win)r.push(e);else{if(s){var t=l.last(c);"tie"===s.win&&t&&(t.ties=l.cloneDeep(r),r=[],s=t.result),t&&s.win&&s.win!==e.win&&a++}for(var n=a,d=0,f=!1;!f;){var g=n+"."+d,h=n+"."+(d+1);if(l.get(o,g))d+1>=i?n++:l.get(o,h)?l.get(o,h).result.win===e.win?d++:n++:d++;else{var p=l.merge({},{row:d,column:n,logicalColumn:a,ties:l.cloneDeep(r)},{result:e});l.set(o,g,p),c.push(o[n][d]),f=!0}}r=[],u=Math.max(u,n)}s=e}}),l.isEmpty(c)&&r.length>0?c.push({ties:l.cloneDeep(r),column:0,row:0,logicalColumn:0,result:{}}):!l.isEmpty(c)&&r.length&&(l.last(c).ties=l.cloneDeep(r)),c.maximumColumnReached=u,c}},{key:"logicalRoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.columns,t.rows,[]),i=0,r=void 0;return e.forEach(function(e){"tie"!==e.win&&(r&&r.win&&r.win!==e.win&&i++,n[i]?n[i].push({result:e}):n[i]=[{result:e}],r=e)}),n}},{key:"refreshRoad",value:function(e){var t=this.roadBig,n=this.bigRoad(e),i=Math.max(n.maximumColumnReached,this._orgCols);this.cols=2*Math.floor(i/2)+2,n.maximumColumnReached>=this._orgCols?this.view.scrollPane.setPosX(this.roadBig.width-this.view.width):this.view.scrollPane.setPosX(0),t.removeChildren(2);for(var r=0;r<n.length;r++){var o=fairygui.UIPackage.createObject("Package1","路格2"),l=n[r].result,a=o.getController("c1");null==l.win?a.selectedIndex=0:"banker"==l.win?a.selectedIndex=1:"player"==l.win&&(a.selectedIndex=2),l.demo?o.getTransition("t0").play():o.getTransition("t0").stop(),o.getChild("n68").visible=l.bankerPair,o.getChild("n69").visible=l.playerPair,o.getChild("n72").visible=null!=n[r].ties&&n[r].ties.length>0,o.x=14*n[r].column+2,o.y=14*n[r].row+2,t.addChild(o)}}},{key:"cols",get:function(){return this._cols},set:function(e){this._cols=e,this.roadBig.width=14*this._cols+1}}]),e}(),c=function(e){for(var t=0,n=0;n<e.length;n++){var i=e[n];t+="ace"===i.description.toLowerCase()?1:i.sort>=10?0:i.sort}return(t%10).toString()},u=function(){function e(t){i(this,e);var n=this;this.view=t,this.roadOld=t.getChild("n1").asList,this.roadOld.setVirtual(),this.roadOld.itemRenderer=Laya.Handler.create(null,function(e,t){t.getChild("n98").text="",t.getChild("n99").text="",t.getController("c1").selectedIndex=t.getController("c2").selectedIndex=t.getController("c3").selectedIndex=0;var i=n._his[e];if(i){t.getChild("n98").text=c(i.bankerCard),t.getChild("n99").text=c(i.playerCard);var r=0;i.deal&&(isNaN(i.deal.zhuang||0)||isNaN(i.deal.xian||0)||(r=(i.deal.zhuang||0)-(i.deal.xian||0))),"banker"==i.win&&(r>0?t.getController("c1").selectedIndex=1:0==r?t.getController("c1").selectedIndex=2:t.getController("c1").selectedIndex=3),"tie"==i.win&&(i.deal&&i.deal.he?t.getController("c3").selectedIndex=1:t.getController("c3").selectedIndex=2),"player"==i.win&&(r<0?t.getController("c2").selectedIndex=1:0==r?t.getController("c2").selectedIndex=2:t.getController("c2").selectedIndex=3)}},null,!1),this._his=[],this.roadOld.numItems=this._orgCols=Math.ceil(this.roadOld.width/17)}return o(e,[{key:"refreshRoad",value:function(e){this._his=e;var t=Math.max(e.length,this._orgCols);this.roadOld.numItems!=t?(this.roadOld.numItems=t,e.length>0&&this.roadOld.scrollToView(e.length-1,!0)):this.roadOld.refreshVirtualList()}}]),e}(),d=function(){function e(t,n,r){i(this,e),this.view=t,this.road=t.getChildAt(0).asCom,this.circle=n||1,this.cols=this._orgCols=r||Math.max(24,Math.ceil(this.view.width/7))}return o(e,[{key:"makeResult",value:function(e,t){return e<=t?"red":e==t+1?"blue":"red"}},{key:"reverseResult",value:function(e){return"red"==e?"blue":"red"}},{key:"bigEye",value:function(e,t){for(var n=[],i=this.circle;i<e.length;i++){var r=e[i],o=i-this.circle,l=e[o].length-1,a=o-1;if(a>=0){var s=e[a].length-1,c=l+1;n.push(this.reverseResult(this.makeResult(c,s)))}for(var u=1;u<r.length;u++)n.push(this.makeResult(u,l))}return n[n.length-1]={color:n[n.length-1],isDemo:t},this.turn2Map(n)}},{key:"turn2Map",value:function(e){var t=6,n={},i=0,o=void 0,a=[],s=0;return e.forEach(function(e){var c;"object"==("undefined"==typeof e?"undefined":r(e))&&(c=e.isDemo,e=e.color),o&&o!=e&&i++;for(var u=i,d=0,f=!1;!f;){var g=u+"."+d,h=u+"."+(d+1);if(l.get(n,g))d+1>=t?u++:l.get(n,h)?l.get(n,h).result===e?d++:u++:d++;else{var p=l.merge({},{row:d,column:u,logicalColumn:i},{result:e,isDemo:c});l.set(n,g,p),a.push(n[u][d]),f=!0}}o=e,s=Math.max(s,u)}),a.maximumColumnReached=s,a}},{key:"refreshRoad",value:function(e,t){var n=this.road,i=this.bigEye(e,t),r=Math.max(i.maximumColumnReached,this._orgCols);this.cols=2*Math.round(r/2+1),i.maximumColumnReached>=this._orgCols?this.view.scrollPane.setPosX(n.width-this.view.width):this.view.scrollPane.setPosX(0),n.removeChildren(2);for(var o=0;o<i.length;o++){var l=fairygui.UIPackage.createObject("Package1","路格"+(2+this.circle)),a=i[o].result,s=i[o].isDemo,c=l.getController("c1");"red"==a?c.selectedIndex=0:c.selectedIndex=1,s?l.getTransition("t0").play():l.getTransition("t0").stop(),l.x=7*i[o].column+1,l.y=7*i[o].row+1,n.addChild(l)}}},{key:"cols",get:function(){return this._cols},set:function(e){this._cols=e,this.road.width=7*this._cols+1}}]),e}();e.exports={BeadPlate:a,BigRoad:s,BigEye:d,OldstyleRoad:u}},165:function(e,t,n){e.exports=n.p+"baijiale@atlas_bri047.png?075e169265a5e4a629ae1e83cc66c691"}});