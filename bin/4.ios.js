webpackJsonp([4],{90:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)};startup_param.showRecharge=!0;var p=r(21);if(window.store){var u=function(e,t,r,n){tongji.beginCharge(e,l[e].actureMoney,l[e].actureCoins,r,"苹果商店支付"),store.order(e)},l={low:{bundle:"com.1357g.niuniu.5tickets"},middle:{bundle:"com.bjl2000.bacc.middleprice"},high:{bundle:"com.bjl2000.bacc.highprice"}};for(var f in l)store.register({id:l[f].bundle,alias:f,type:store.CONSUMABLE}),store.when(f).updated(function(e){console.log(f,"price",e.price),l[f]=p(l[f],e),"invalid"!=e.state&&(l[f].actureMoney=Number(e.price.substr(1)),l[f].actureCoins=e.description.substr(e.description.indexOf("=")+1))}).approved(function(e){e.verify()}).verified(function(e){if(console.log("finally",e),!appleOrderid)return appleOrderCb&&appleOrderCb("appleOrderid was not set");var t={actureMoney:l[f].actureMoney,orderid:appleOrderid,receipt:e.transaction.appStoreReceipt};getAjax("/pf/apple/pay",t,function(t,r){t=t||r.err,t?(console.log(t,r),tipon(t).popup()):tipon("购买成功").popup(),e.finish(),tongji.endCharge(appleOrderid,"苹果商店支付");var n=appleOrderCb;appleOrderCb=null,n&&n()})}).cancelled(function(e){var t=appleOrderCb;appleOrderCb=null,t&&t()});store.validator=function(e,t){console.log("verify",e),t(!0)},store.error(function(e){console.log(e)}),store.refresh();var d=async.queue(function(e,t){"function"==typeof e?e(t):t()});window.pay=function(e,t,r,n){!n&&(n=_noop),d.push(u.bind(null,e,t,r),n)},document.addEventListener("gameLoaded",function(){var e=r(91),t=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recharge"))}return i(t,e),a(t,[{key:"onInit",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onInit",this).call(this);var e=this.contentPane.getChild("n87"),r=0,n=function(t){i=e.getChildAt(r),l[t].price&&(i.getChild("n85").text=l[t].price),i.onClick(null,function(){getAjax("createOrder",{productId:l[t].bundle},function(e,r){pay(l[t].bundle)})}),e.addChild(i)};for(var o in l){var i;n(o)}}}]),t}(e.Win);e.RechargeWin=t})}else alert("cc.fovea.cordova.purchase not installed")}});